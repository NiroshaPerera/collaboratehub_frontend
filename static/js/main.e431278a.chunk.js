(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(20).concat([function(e,t,a){e.exports=a(58)},,,,,,,,function(e,t,a){},,,function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(13),c=a.n(r),o=a(7),s=a(3);a(28);var m=function(){return l.a.createElement("div",{className:"home-container"},l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"logo"},"CollaborateHub"),l.a.createElement("nav",{className:"nav"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(o.b,{to:"/about"})),l.a.createElement("li",null,l.a.createElement(o.b,{to:"/contact"}))))),l.a.createElement("main",{className:"main"},l.a.createElement("div",{className:"image-container"},l.a.createElement("img",{src:"https://img.freepik.com/premium-photo/resolving-conflict_810293-168540.jpg?w=740",alt:"A diverse team collaborating on a project using a collaborative platform"})),l.a.createElement("div",{className:"hero"},l.a.createElement("h1",null,"Welcome to the"),l.a.createElement("h1",null,"Employee Collaboration Platform"),l.a.createElement("p",null,"Please log in or register to access the platform."),l.a.createElement("div",{className:"buttons"},l.a.createElement(o.b,{to:"/login"},l.a.createElement("button",null,"Login")),l.a.createElement(o.b,{to:"/register"},l.a.createElement("button",null,"Sign Up"))))))},i=a(9),u=a(8);a(31);var d=()=>{const e=Object(s.p)();return l.a.createElement("button",{onClick:()=>{e(-1)},className:"back-button"},l.a.createElement(i.a,{icon:u.b}))},E=(a(32),a(60));var p=function(){const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[c,o]=Object(n.useState)(""),[m,i]=Object(n.useState)(""),u=Object(s.p)();return l.a.createElement("div",{className:"container"},l.a.createElement(d,null),l.a.createElement("div",{className:"register-container"},l.a.createElement("h1",null,"Create your account"),l.a.createElement("form",{onSubmit:async n=>{if(n.preventDefault(),a===c)try{const n={username:e,password:a,email:m},c=await E.a.post("http://localhost:5000/api/user/register",n);console.log("Registration successful:",c.data),t(""),r(""),o(""),i(""),u("/login")}catch(l){console.error("Registration error:",l.response.data),alert("Registration failed. Please try again.")}else alert("Passwords do not match")}},l.a.createElement("label",{htmlFor:"username"},"Username"),l.a.createElement("input",{type:"text",id:"username",name:"username",value:e,onChange:e=>t(e.target.value),required:!0}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",id:"password",name:"password",value:a,onChange:e=>r(e.target.value),required:!0}),l.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm Password"),l.a.createElement("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:c,onChange:e=>o(e.target.value),required:!0}),l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{type:"email",id:"email",name:"email",value:m,onChange:e=>i(e.target.value),required:!0}),l.a.createElement("button",{type:"submit"},"Sign Up"))))};a(37);var h=function(){const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),c=Object(s.p)();return l.a.createElement("div",{className:"container"},l.a.createElement(d,null),l.a.createElement("div",{className:"login-container"},l.a.createElement("h1",null,"Login"),l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();const n={email:e,password:a};try{const e=await E.a.post("http://localhost:5000/api/user/login",n);console.log("Login successful:",e.data);const t=e.data.token;localStorage.setItem("jwtToken",t),c("/dashboard")}catch(l){console.error("Login error:",l.response.data),alert("Invalid credentials. Please try again.")}}},l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{type:"email",id:"email",name:"email",value:e,onChange:e=>t(e.target.value),required:!0}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",id:"password",value:a,onChange:e=>r(e.target.value)}),l.a.createElement("button",{type:"submit"},"Login"))))};const g=Object(n.createContext)(null),v=e=>{let{children:t}=e;const[a,r]=Object(n.useState)([]),[c,o]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{try{const t=localStorage.getItem("jwtToken"),a=await E.a.get("http://localhost:5000/api/user",{headers:{Authorization:"Bearer ".concat(t)}});r(a.data.user)}catch(e){console.error("Error fetching logged-in user:",e)}})()},[]);return l.a.createElement(g.Provider,{value:{user:a,users:c,addUser:e=>{o([...c,e]),localStorage.setItem("users",JSON.stringify([...c,e]))},removeUser:e=>{o(c.filter(t=>t.id!==e)),localStorage.setItem("users",JSON.stringify(c.filter(t=>t.id!==e)))},updateUser:(e,t)=>{o(c.map(a=>a.id===e?{...a,...t}:a))}}},t)};a(38);var b=()=>{const{userId:e}=Object(s.r)(),{user:t}=Object(n.useContext)(g),[a,r]=Object(n.useState)(!1),[c,o]=Object(n.useState)({name:(null===t||void 0===t?void 0:t.name)||"",email:(null===t||void 0===t?void 0:t.email)||"",role:(null===t||void 0===t?void 0:t.role)||"",bio:(null===t||void 0===t?void 0:t.bio)||"",imagePreview:(null===t||void 0===t?void 0:t.image)||""}),m=localStorage.getItem("jwtToken"),i=e=>{o({...c,[e.target.name]:e.target.value})},u=()=>{r(!a)},p=async t=>{t.preventDefault();try{console.log("Updating profile with data:",c);const t=await E.a.put("http://localhost:5000/api/user/".concat(e),c,{headers:{Authorization:"Bearer ".concat(m)}});console.log("Profile updated successfully:",t.data),r(!1),alert("Profile updated successfully")}catch(a){console.error("Error updating profile:",a),alert("Error updating profile. Please try again.")}};return l.a.createElement("div",{className:"profile"},l.a.createElement(d,null),l.a.createElement("div",{className:"edit-profile"},a?l.a.createElement("form",{onSubmit:p,className:"edit-profile-form"},l.a.createElement("label",{htmlFor:"name"},"Name: "),l.a.createElement("input",{type:"text",name:"name",value:c.name,onChange:i,required:!0}),l.a.createElement("label",{htmlFor:"email"},"Email: "),l.a.createElement("input",{type:"email",name:"email",value:c.email,onChange:i,disabled:!0}),l.a.createElement("label",{htmlFor:"role"},"Role: "),l.a.createElement("input",{type:"text",name:"role",value:c.role,onChange:i}),l.a.createElement("label",{htmlFor:"bio"},"Bio: "),l.a.createElement("textarea",{name:"bio",value:c.bio,onChange:i}),l.a.createElement("label",{htmlFor:"image"},"Profile Image: "),l.a.createElement("input",{type:"file",name:"image"}),l.a.createElement("button",{type:"submit"},"Save Profile"),l.a.createElement("button",{type:"button",onClick:u},"Cancel")):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"user-profile"},l.a.createElement("h2",null,t.name),l.a.createElement("p",null,l.a.createElement("strong",null,"Email:")," ",t.email),l.a.createElement("p",null,l.a.createElement("strong",null,"Role:")," ",t.role),l.a.createElement("p",null,l.a.createElement("strong",null,"Bio:")," ",t.bio),t.image&&l.a.createElement("img",{src:t.image,alt:"Profile Picture"})),l.a.createElement("button",{onClick:u},"Edit Profile"))))};a(39);var y=e=>{let{loggedInUser:t}=e;const a=Object(s.p)(),{users:r}=Object(n.useContext)(g),[c,m]=Object(n.useState)(null);Object(n.useEffect)(()=>{const e=localStorage.getItem("jwtToken");m(e)},[]);return l.a.createElement("div",{className:"dashboard"},l.a.createElement("header",{className:"dashboard-header"},l.a.createElement("div",{className:"logo"},"CollaborateHub"),l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(o.b,{to:"/profile/".concat(null===t||void 0===t?void 0:t.id)},"Profile")),l.a.createElement("li",null,l.a.createElement("button",{onClick:()=>{localStorage.removeItem("jwtToken"),m(null),a("/")},className:"logout-button"},"Logout"))))),l.a.createElement("main",{className:"dashboard-content"},l.a.createElement(d,null),l.a.createElement("h2",{className:"dashboard-heading"},"Dashboard"),l.a.createElement("ul",{className:"dashboard-nav-list"},l.a.createElement("li",{className:"dashboard-nav-item"},l.a.createElement(o.b,{to:"/dashboard/document-sharing"},l.a.createElement(i.a,{icon:u.i}),"Document Sharing")),l.a.createElement("li",{className:"dashboard-nav-item"},l.a.createElement(o.b,{to:"/dashboard/employee-directory"},l.a.createElement(i.a,{icon:u.a}),"Employee Directory")),l.a.createElement("li",{className:"dashboard-nav-item"},l.a.createElement(o.b,{to:"/dashboard/event-calendar"},l.a.createElement(i.a,{icon:u.d}),"Event Calendar")),l.a.createElement("li",{className:"dashboard-nav-item"},l.a.createElement(o.b,{to:"/dashboard/task-management"},l.a.createElement(i.a,{icon:u.c}),"Task Management")))))},f=a(19);a(40);var w=e=>{let{addDocument:t}=e;const[a,r]=Object(n.useState)(null),[c,s]=Object(n.useState)(""),[m,i]=Object(n.useState)(""),[u,p]=Object(n.useState)(""),{user:h}=Object(n.useContext)(g),v=Object(n.useCallback)(e=>{r(e[0])},[]),{getRootProps:b,getInputProps:y}=Object(f.a)({onDrop:v}),w=localStorage.getItem("jwtToken");return l.a.createElement("div",{className:"container"},l.a.createElement(d,null),l.a.createElement("div",{className:"document-sharing"},l.a.createElement("div",{className:"file-upload"},l.a.createElement("div",b({className:"dropzone"}),l.a.createElement("input",y()),l.a.createElement("p",null,"Drag & drop a file here, or click to select one")),l.a.createElement("div",{className:"box1"},l.a.createElement("input",{type:"text",value:c,onChange:e=>s(e.target.value),placeholder:"Enter document name"})),l.a.createElement("div",{className:"box2"},l.a.createElement("input",{type:"text",value:m,onChange:e=>i(e.target.value),placeholder:"Enter user name"})),l.a.createElement("div",{className:"box3"},l.a.createElement("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Enter collaborator (comma-separated)"})),l.a.createElement("button",{onClick:async()=>{if(a&&c&&m&&u){const n=new FormData;n.append("name",c),n.append("content",a),n.append("uploadedBy",h._id),n.append("collaborators",u);try{const a=await E.a.post("http://localhost:5000/api/documents",n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(w)}});console.log(a.data),t(n),r(null),s(""),i(""),p(""),alert("Document uploaded successfully!")}catch(e){console.error(e),alert("Error uploading document: "+e.message),e.response&&400===e.response.status?alert("Bad request: Please check the file format or other input values."):e.response&&500===e.response.status&&alert("Server error: Please try again later.")}}else alert("Please fill in all fields.")}},"Upload Document")),l.a.createElement("div",{className:"view-link"},l.a.createElement(o.b,{to:"/view-documents"},"View Uploaded Documents"))))};a(41);var k=e=>{let{addTask:t}=e;const[a,r]=Object(n.useState)(""),[c,s]=Object(n.useState)(""),[m,i]=Object(n.useState)(""),[u,p]=Object(n.useState)(""),[h,g]=Object(n.useState)("Medium");return l.a.createElement("div",{className:"task-management"},l.a.createElement(d,null),l.a.createElement("div",{className:"task-creation-form"},l.a.createElement("h3",null,"Create a New Task"),l.a.createElement("input",{type:"text",placeholder:"Task",value:a,onChange:e=>r(e.target.value)}),l.a.createElement("textarea",{placeholder:"Description",value:c,onChange:e=>s(e.target.value)}),l.a.createElement("input",{type:"date",placeholder:"Deadline",value:m,onChange:e=>i(e.target.value)}),l.a.createElement("input",{type:"text",placeholder:"Assignee",value:u,onChange:e=>p(e.target.value)}),l.a.createElement("select",{value:h,onChange:e=>g(e.target.value)},l.a.createElement("option",{value:"High"},"High"),l.a.createElement("option",{value:"Medium"},"Medium"),l.a.createElement("option",{value:"Low"},"Low")),l.a.createElement("button",{onClick:async()=>{if(a&&c&&m&&u&&h){const n={id:Date.now(),name:a,description:c,deadline:m,assignee:u,priority:h,status:"Pending"};try{const a=localStorage.getItem("jwtToken"),l=await E.a.post("http://localhost:5000/api/tasks",n,{headers:{Authorization:"Bearer ".concat(a)}});t(l.data),r(""),s(""),i(""),p(""),g("Medium"),alert("Task added successfully")}catch(e){console.error("Error adding task:",e),alert("Failed to add task. Please try again.")}}else alert("Please fill in all fields")}},"Add Task"),l.a.createElement("div",{className:"view-link"},l.a.createElement(o.b,{to:"/view-tasks"},"View Tasks"))))},j=a(18);a(42),a(43);var C=()=>{const{department:e}=Object(s.r)(),t=Object(s.p)(),[a,r]=Object(n.useState)([]),[c,o]=Object(n.useState)(new Date),[m,i]=Object(n.useState)(!1),[u,p]=Object(n.useState)(null),[h,g]=Object(n.useState)([]),[v,b]=Object(n.useState)({});Object(n.useEffect)(()=>{(async()=>{try{const a=localStorage.getItem("jwtToken"),n=await E.a.get("http://localhost:5000/api/events?department=".concat(e),{headers:{Authorization:"Bearer ".concat(a)}});r(n.data)}catch(t){console.error("Error fetching events:",t)}})()},[e]);const y=async(e,t)=>{try{await E.a.put("http://localhost:5000/api/events/".concat(e,"/respond"),{response:t}),b(a=>({...a,[e]:t}))}catch(a){console.error("Error updating event response:",a)}};Object(n.useEffect)(()=>{const e=setInterval(()=>{const e=(new Date).getTime();h.forEach(t=>{e>=t.time&&(alert("Reminder for event: "+a.find(e=>e.id===t.eventId).title),g(h.filter(e=>e!==t)))})},1e3);return()=>clearInterval(e)},[h,a]);const f=a.filter(e=>new Date(e.date).toDateString()===c.toDateString());return l.a.createElement("div",{className:"event-calendar"},l.a.createElement(d,null),l.a.createElement(j.a,{onChange:e=>{o(e)},value:c}),l.a.createElement("div",{className:"event-list"},l.a.createElement("h3",null,"Events on ",c.toDateString()),l.a.createElement("ul",null,f.map(e=>l.a.createElement("li",{key:e.id,onClick:()=>(e=>{p(e),i(!0)})(e)},e.title," - ",e.department))),l.a.createElement("button",{onClick:()=>t("/add-event/".concat(e))},"Add Event")),m&&u&&l.a.createElement("div",{className:"event-modal"},l.a.createElement("div",{className:"event-modal-content"},l.a.createElement("h3",null,u.title),l.a.createElement("p",null,u.description),l.a.createElement("p",null,l.a.createElement("strong",null,"Department:")," ",u.department),v[u.id]&&l.a.createElement("p",null,"Your response: ",v[u.id]),l.a.createElement("button",{onClick:()=>y(u.id,"accepted")},"Accept"),l.a.createElement("button",{onClick:()=>y(u.id,"declined")},"Decline"),l.a.createElement("button",{onClick:()=>(e=>{const t={eventId:e,time:(new Date).getTime()+6e4};g([...h,t])})(u.id)},"Set Reminder"),l.a.createElement("button",{onClick:()=>{i(!1),p(null)}},"Close"))))};a(48);var S=()=>{const e=Object(s.p)(),t=t=>{e("/document-sharing/".concat(t))};return l.a.createElement("div",{className:"department-selection-page"},l.a.createElement(d,null),l.a.createElement("h2",null,"Select a department to view the documents"),l.a.createElement("div",{className:"departments"},l.a.createElement("div",{className:"department",onClick:()=>t("Engineering")},l.a.createElement(i.a,{icon:u.f}),"Engineering"),l.a.createElement("div",{className:"department",onClick:()=>t("Marketing")},l.a.createElement(i.a,{icon:u.h}),"Marketing"),l.a.createElement("div",{className:"department",onClick:()=>t("IT")},l.a.createElement(i.a,{icon:u.g}),"IT Software"),l.a.createElement("div",{className:"department",onClick:()=>t("HR")},l.a.createElement(i.a,{icon:u.j}),"HR")))};a(49);var N=()=>{const e=Object(s.p)(),t=t=>{e("/event-calendar/".concat(t))};return l.a.createElement("div",{className:"department-selection"},l.a.createElement(d,null),l.a.createElement("h2",null,"Select a department to view & add the events"),l.a.createElement("div",{className:"departments"},l.a.createElement("div",{className:"department",onClick:()=>t("Engineering")},l.a.createElement(i.a,{icon:u.f}),"Engineering"),l.a.createElement("div",{className:"department",onClick:()=>t("Marketing")},l.a.createElement(i.a,{icon:u.h}),"Marketing"),l.a.createElement("div",{className:"department",onClick:()=>t("IT")},l.a.createElement(i.a,{icon:u.g}),"IT Software"),l.a.createElement("div",{className:"department",onClick:()=>t("HR")},l.a.createElement(i.a,{icon:u.j}),"HR")))};a(50);var O=e=>{let{}=e;const[t,a]=Object(n.useState)([]),[r,c]=Object(n.useState)("name"),[o,m]=Object(n.useState)("all"),[i,u]=Object(n.useState)(""),[p,h]=Object(n.useState)(1),v=Object(s.p)(),{user:b}=Object(n.useContext)(g);Object(n.useEffect)(()=>{(async()=>{try{const t=localStorage.getItem("jwtToken"),n=await E.a.get("http://localhost:5000/api/documents",{headers:{Authorization:"Bearer ".concat(t)},params:{sortBy:r,filterBy:o,searchTerm:i,page:p}});a(n.data.documents)}catch(e){console.error(e)}})()},[r,o,i,p,b]);const y=[...t].sort((e,t)=>"name"===r?e.name.localeCompare(t.name):"date"===r?new Date(t.date)-new Date(e.date):0),f=("all"===o?y:y.filter(e=>e.type.includes(o))).filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.uploadedBy.toLowerCase().includes(i.toLowerCase())),w=Math.ceil(f.length/5),k=f.slice(5*(p-1),5*p);return l.a.createElement("div",{className:"view-documents"},l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"logo"},"CollaborateHub"),l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"/"},"Home")),l.a.createElement("li",null,l.a.createElement("a",{href:"/dashboard"},"Dashboard")),l.a.createElement("li",null,l.a.createElement("button",{onClick:()=>{v("/")},className:"logout-button"},"Logout"))))),l.a.createElement(d,null),l.a.createElement("h2",null,"Uploaded Documents"),l.a.createElement("div",{className:"controls"},l.a.createElement("div",{className:"filters"},l.a.createElement("label",null,l.a.createElement("select",{value:r,onChange:e=>{c(e.target.value)}},l.a.createElement("option",{value:"name"},"Sort by: Name"),l.a.createElement("option",{value:"date"},"Sort by:Date"))),l.a.createElement("label",null,l.a.createElement("select",{value:o,onChange:e=>{m(e.target.value)}},l.a.createElement("option",{value:"all"},"Filter by:All Documents"),l.a.createElement("option",{value:"application/pdf"},"Filter by:PDF"),l.a.createElement("option",{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},"Filter by:DOCX"),l.a.createElement("option",{value:"application/vnd.ms-powerpoint"},"Filter by:PPT"),l.a.createElement("option",{value:"text/plain"},"Filter by:TXT"))),l.a.createElement("label",{name:"searh-bar"},l.a.createElement("input",{type:"text",value:i,onChange:e=>{u(e.target.value)},placeholder:"File name or user name"})))),l.a.createElement("div",{className:"doc-list"},l.a.createElement("ul",null,k.map(e=>l.a.createElement("li",{key:e.id},l.a.createElement("span",null,e.name," (Uploaded by: ",e.uploadedBy,")"),l.a.createElement("button",{onClick:()=>(async e=>{try{const a=localStorage.getItem("jwtToken");console.log("Token:",a);const n=(await E.a.get("http://localhost:5000/api/documents/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}})).data;if(!n)return void alert("Document not found");if(!b||!n.collaborators.includes(b._id))return void alert("You are not authorized to download this document");const l=URL.createObjectURL(new Blob([n.content],{type:n.type})),r=n.createElement("a");r.href=l,r.setAttribute("download",n.name),n.body.appendChild(r),r.click(),n.body.removeChild(r)}catch(t){console.error(t),alert("Error downloading document: "+t.message)}})(e)},"Download")))),l.a.createElement("div",{className:"pagination"},l.a.createElement("button",{onClick:()=>h(p-1),disabled:1===p},"Previous"),l.a.createElement("span",null,p," of ",w),l.a.createElement("button",{onClick:()=>h(p+1),disabled:p===w},"Next"))))};a(51);var T=e=>{let{addEvent:t}=e;const[a,r]=Object(n.useState)(""),[c,m]=Object(n.useState)(""),[i,u]=Object(n.useState)(""),[p,h]=Object(n.useState)(""),[g,v]=Object(n.useState)(""),b=Object(s.p)();return l.a.createElement("div",{className:"add-event"},l.a.createElement(d,null),l.a.createElement("h2",null,"Add Event"),l.a.createElement("form",{onSubmit:async e=>{e.preventDefault();const n={id:Date.now(),title:a,description:c,department:i,date:new Date("".concat(p,"T").concat(g)).toISOString()};t(n);try{const e=localStorage.getItem("jwtToken"),t=await E.a.post("http://localhost:5000/api/events",n,{headers:{Authorization:"Bearer ".concat(e)}});console.log("Event created successfully:",t.data),b("/view-events")}catch(l){console.error("Error creating event:",l)}}},l.a.createElement("label",null,"Title:",l.a.createElement("input",{type:"text",value:a,onChange:e=>r(e.target.value),required:!0})),l.a.createElement("label",null,"Description:",l.a.createElement("input",{type:"text",value:c,onChange:e=>m(e.target.value),required:!0})),l.a.createElement("label",null,"Department:",l.a.createElement("input",{type:"text",value:i,onChange:e=>u(e.target.value),required:!0})),l.a.createElement("label",null,"Date:",l.a.createElement("input",{type:"date",value:p,onChange:e=>h(e.target.value),required:!0})),l.a.createElement("label",null,"Time:",l.a.createElement("input",{type:"time",value:g,onChange:e=>v(e.target.value),required:!0})),l.a.createElement("button",{type:"submit"},"Add Event"),l.a.createElement("div",{className:"view-link"},l.a.createElement(o.b,{to:"/view-events"},"View Events"))))},D=(a(52),a(61));var I=()=>{const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)(!1),[c,o]=Object(n.useState)(null),[m,p]=Object(n.useState)([]),[h,g]=Object(n.useState)({}),v=Object(s.p)();Object(n.useEffect)(()=>{(async()=>{try{const a=localStorage.getItem("jwtToken"),n=await E.a.get("http://localhost:5000/api/events",{headers:{Authorization:"Bearer ".concat(a)}});t(n.data)}catch(e){console.error("Error fetching events:",e)}})()},[]);const b=async(e,t)=>{try{const n=localStorage.getItem("jwtToken"),l=await E.a.put("http://localhost:5000/api/events/".concat(e,"/respond"),{response:t},{headers:{Authorization:"Bearer ".concat(n)}});if(g(a=>({...a,[e]:t})),l.data.success){if("accepted"===t)alert("Event participation confirmed!");else if("declined"===t){const e=prompt("Please provide the reason for declining");alert("Event declined: ".concat(e))}}else console.error("Error updating event response:",l.error)}catch(a){console.error("Error updating event response:",a)}};Object(n.useEffect)(()=>{const t=setInterval(()=>{const t=(new Date).getTime();m.forEach(a=>{t>=a.time&&(alert("Reminder for event: "+e.find(e=>e.id===a.eventId).title),p(m.filter(e=>e!==a)))})},1e3);return()=>clearInterval(t)},[m,e]);return l.a.createElement("div",{className:"view-events"},l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"logo"},"CollaborateHub"),l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"/"},"Home")),l.a.createElement("li",null,l.a.createElement("a",{href:"/dashboard"},"Dashboard")),l.a.createElement("li",null,l.a.createElement("button",{onClick:()=>{v("/")},className:"logout-button"},"Logout"))))),l.a.createElement(d,null),l.a.createElement("div",{className:"event-list"},l.a.createElement("ul",null,e.map(e=>l.a.createElement("li",{key:e.id,onClick:()=>(e=>{o(e),r(!0)})(e)},l.a.createElement(i.a,{icon:u.d}),"  ",e.title," - ",e.department,l.a.createElement(i.a,{icon:u.e}))))),a&&c&&l.a.createElement("div",{className:"event-modal"},l.a.createElement("div",{className:"event-modal-content"},l.a.createElement("h3",null,c.title),l.a.createElement("p",null,c.description),l.a.createElement("p",null,l.a.createElement("strong",null,"Department:")," ",c.department),l.a.createElement("p",null,l.a.createElement("strong",null,"Date:")," ",Object(D.a)(new Date(c.date),"Pp")),l.a.createElement("p",null,"Your response: ",h[c.id]||"Not Responded"),l.a.createElement("button",{onClick:()=>b(c.id,"accepted")},"Accept"),l.a.createElement("button",{onClick:()=>b(c.id,"declined")},"Decline"),l.a.createElement("button",{onClick:()=>(t=>{const a=e.find(e=>e.id===t);if(a){const e=new Date(a.date).getTime()-18e5,n={eventId:t,time:e};p([...m,n])}})(c.id)},"Set Reminder"),l.a.createElement("button",{onClick:()=>{r(!1),o(null)}},"Close"))))};a(53);var P=()=>{const e=Object(s.p)(),t=t=>{e("/task-management/".concat(t))};return l.a.createElement("div",{className:"department-select"},l.a.createElement(d,null),l.a.createElement("h2",null,"Select a department to view the tasks"),l.a.createElement("div",{className:"departments"},l.a.createElement("div",{className:"department",onClick:()=>t("Engineering")},l.a.createElement(i.a,{icon:u.f}),"Engineering"),l.a.createElement("div",{className:"department",onClick:()=>t("Marketing")},l.a.createElement(i.a,{icon:u.h}),"Marketing"),l.a.createElement("div",{className:"department",onClick:()=>t("IT")},l.a.createElement(i.a,{icon:u.g}),"IT Software"),l.a.createElement("div",{className:"department",onClick:()=>t("HR")},l.a.createElement(i.a,{icon:u.j}),"HR")))};a(54);const x=Object(n.createContext)(),A=e=>{let{children:t}=e;const[a,r]=Object(n.useState)([]),c=localStorage.getItem("jwtToken");Object(n.useEffect)(()=>{(async()=>{try{const t=await E.a.get("http://localhost:5000/api/tasks",{headers:{Authorization:"Bearer ".concat(c)}});r(t.data)}catch(e){console.error("Error fetching tasks:",e)}})()},[]);return l.a.createElement(x.Provider,{value:{tasks:a,addTask:async e=>{try{const n=await E.a.post("http://localhost:5000/api/tasks",e,{headers:{Authorization:"Bearer ".concat(c)}});r([...a,n.data])}catch(t){console.error("Error adding task:",t)}},updateTaskStatus:async(e,t)=>{try{const n=(await E.a.put("http://localhost:5000/api/tasks/".concat(e),{status:t},{headers:{Authorization:"Bearer ".concat(c)}})).data;r(t=>t.map(t=>t.id===e?n:t))}catch(a){console.error("Error updating task status:",a)}},deleteTask:async e=>{try{await E.a.delete("http://localhost:5000/api/tasks/".concat(e),{headers:{Authorization:"Bearer ".concat(c)}}),r(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Error deleting task:",t)}}}},t)};var B=()=>{const{tasks:e,setTasks:t,updateTaskStatus:a,deleteTask:r}=Object(n.useContext)(x),[c,o]=Object(n.useState)("All"),[m,i]=Object(n.useState)("Date"),u=Object(s.p)(),p=localStorage.getItem("jwtToken");Object(n.useEffect)(()=>{(async()=>{try{const a=await E.a.get("http://localhost:5000/api/tasks",{headers:{Authorization:"Bearer ".concat(p)}});t(a.data)}catch(e){console.error("Error fetching tasks:",e)}})()},[]);const h=(e=>{if("Date"===m)return e.sort((e,t)=>new Date(e.deadline)-new Date(t.deadline));if("Priority"===m){const t={High:1,Medium:2,Low:3};return e.sort((e,a)=>t[e.priority]-t[a.priority])}return e})((e=>"All"===c?e:e.filter(e=>e.status===c))(e));Object(n.useEffect)(()=>{const t=()=>{const t=new Date;e.forEach(e=>{const a=new Date(e.deadline)-t,n=Math.ceil(a/864e5);1===n?alert('Reminder: The task "'.concat(e.name,'" is due tomorrow!')):0===n?alert('Reminder: The task "'.concat(e.name,'" is due today!')):n<0&&"Completed"!==e.status&&alert('Reminder: The task "'.concat(e.name,'" is overdue!'))})};t();const a=setInterval(t,864e5);return()=>clearInterval(a)},[e]);return l.a.createElement("div",{className:"view-tasks"},l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"logo"},"CollaborateHub"),l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"/"},"Home")),l.a.createElement("li",null,l.a.createElement("a",{href:"/dashboard"},"Dashboard")),l.a.createElement("li",null,l.a.createElement("button",{onClick:()=>{u("/")},className:"logout-button"},"Logout"))))),l.a.createElement(d,null),l.a.createElement("div",{className:"task-filter-sort"},l.a.createElement("div",null,l.a.createElement("label",null,"Status"),l.a.createElement("select",{value:c,onChange:e=>o(e.target.value)},l.a.createElement("option",{value:"All"},"All"),l.a.createElement("option",{value:"Pending"},"Pending"),l.a.createElement("option",{value:"In Progress"},"In Progress"),l.a.createElement("option",{value:"Completed"},"Completed"))),l.a.createElement("div",null,l.a.createElement("label",null,"Sort By"),l.a.createElement("select",{value:m,onChange:e=>i(e.target.value)},l.a.createElement("option",{value:"Date"},"Date"),l.a.createElement("option",{value:"Priority"},"Priority")))),l.a.createElement("div",{className:"task-list"},l.a.createElement("ul",null,h.map(e=>l.a.createElement("li",{key:e.id,className:"task-item ".concat(e.status.toLowerCase())},l.a.createElement("h4",null,e.name),l.a.createElement("p",null,e.description),l.a.createElement("p",null,l.a.createElement("strong",null,"Deadline:")," ",e.deadline),l.a.createElement("p",null,l.a.createElement("strong",null,"Assignee:")," ",e.assignee),l.a.createElement("p",null,l.a.createElement("strong",null,"Priority:")," ",e.priority),l.a.createElement("p",null,l.a.createElement("strong",null,"Status:")," ",e.status),l.a.createElement("button",{onClick:()=>a(e.id,"Pending")},"Pending"),l.a.createElement("button",{onClick:()=>a(e.id,"In Progress")},"In Progress"),l.a.createElement("button",{onClick:()=>a(e.id,"Completed")},"Completed"),l.a.createElement("button",{onClick:()=>r(e.id)},"Delete"))))))};var L=e=>{let{onEmployeeClick:t,searchTerm:a,expertiseTerm:r,onUpdateEmployee:c,onDeleteEmployee:o}=e;const[s,m]=Object(n.useState)([]),i=s.filter(e=>"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(a.toLowerCase())&&e.expertise.toLowerCase().includes(r.toLowerCase())),[u,d]=Object(n.useState)(!1),E=Object(n.useCallback)(async()=>{d(!0);try{const t=await fetch("http://localhost:5000/api/employees/search?searchTerm=".concat(a,"&expertiseTerm=").concat(r));if(!t.ok)throw new Error("Failed to fetch employees");const n=await t.json();m(n)}catch(e){console.error("Error fetching employees:",e)}finally{d(!1)}},[a,r]);return Object(n.useEffect)(()=>{(a||r)&&E()},[a,r]),l.a.createElement("ul",null,u?l.a.createElement("li",null,"Loading employees..."):i.map(e=>l.a.createElement("li",{key:e.id},l.a.createElement("button",{onClick:()=>t(e.id)},e.firstName," ",e.lastName," - ",e.department," (",e.location,")"),l.a.createElement("button",{onClick:()=>c(e.id)},"Update"),l.a.createElement("button",{onClick:()=>o(e.id)},"Delete"))))};a(55);var R=e=>{let{}=e;const[t,a]=Object(n.useState)(""),[r,c]=Object(n.useState)(""),[o,s]=Object(n.useState)(""),[m,i]=Object(n.useState)(""),[u,E]=Object(n.useState)(""),[p,h]=Object(n.useState)("");return l.a.createElement("div",{className:"add-employee"},l.a.createElement(d,null),l.a.createElement("form",{onSubmit:async e=>{e.preventDefault();const a={firstName:t,lastName:r,department:o,expertise:m,email:u},n=localStorage.getItem("jwtToken");try{if(!(await fetch("http://localhost:5000/api/employees",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(a)})).ok)throw new Error("Error adding employee");console.log("Employee added successfully"),alert("Employee added successfully!")}catch(l){h("Error adding employee. Please try again."),console.error("Error adding employee:",l)}}},l.a.createElement("h2",null,"Add Employee"),l.a.createElement("input",{type:"text",placeholder:"First Name",value:t,onChange:e=>a(e.target.value),required:!0}),l.a.createElement("input",{type:"text",placeholder:"Last Name",value:r,onChange:e=>c(e.target.value),required:!0}),l.a.createElement("input",{type:"text",placeholder:"Department",value:o,onChange:e=>s(e.target.value),required:!0}),l.a.createElement("input",{type:"text",placeholder:"Expertise",value:m,onChange:e=>i(e.target.value),required:!0}),l.a.createElement("input",{type:"email",placeholder:"Email (optional)",value:u,onChange:e=>E(e.target.value)}),l.a.createElement("button",{type:"submit"},"Add Employee")))};a(56);var z=()=>{const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)(!1),[c,m]=Object(n.useState)(""),[i,u]=Object(n.useState)(""),E=Object(s.p)(),p=localStorage.getItem("jwtToken");Object(n.useEffect)(()=>{(async()=>{try{const a=await fetch("http://localhost:5000/api/employees",{headers:{Authorization:"Bearer ".concat(p)}});if(!a.ok)throw new Error("Error fetching employees");const n=await a.json();t(n)}catch(e){console.error("Error fetching employees:",e)}})()},[p]);return l.a.createElement("div",{className:"view-employees"},l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"logo"},"CollaborateHub"),l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"/"},"Home")),l.a.createElement("li",null,l.a.createElement("a",{href:"/dashboard"},"Dashboard")),l.a.createElement("li",null,l.a.createElement("button",{onClick:()=>{E("/")},className:"logout-button"},"Logout"))))),l.a.createElement(d,null),l.a.createElement("h2",null,"Employee Directory"),l.a.createElement("div",{className:"controls"},l.a.createElement("div",{className:"box1"},l.a.createElement("input",{type:"text",placeholder:"Search by Name",value:c,onChange:e=>{m(e.target.value)}})),l.a.createElement("div",{className:"box2"},l.a.createElement("input",{type:"text",placeholder:"Search by Expertise",value:i,onChange:e=>{u(e.target.value)}}),l.a.createElement(L,{employees:e,searchTerm:c,expertiseTerm:i})),l.a.createElement("button",{onClick:async()=>{if(c&&i)try{const a=await fetch("http://localhost:5000/api/employees/search?searchTerm=".concat(c,"&expertiseTerm=").concat(i),{headers:{Authorization:"Bearer ".concat(p)}});if(!a.ok)throw new Error("Error searching employees: ".concat(a.statusText));const n=await a.json();t(n)}catch(e){console.error("Error searching employees:",e)}else console.warn("Please enter both search terms (name and expertise)")}},"Search"),l.a.createElement(L,{employees:e,searchTerm:c,expertiseTerm:i,onEmployeeClick:e=>{E("/edit-employee/".concat(e))},onUpdateEmployee:e=>{E("/edit-employee/".concat(e))},onDeleteEmployee:async a=>{if(window.confirm("Are you sure you want to delete employee ".concat(a,"?")))try{const l=await fetch("http://localhost:5000/api/employees/".concat(a),{method:"DELETE",headers:{Authorization:"Bearer ".concat(p)}});if(!l.ok)throw new Error("Error deleting employee: ".concat(l.statusText));t(e.filter(e=>e.id!==a)),console.log("Employee deleted successfully!")}catch(n){console.error("Error deleting employee:",n)}}})),l.a.createElement("div",{className:"view-link"},l.a.createElement(o.b,{to:"/add-employee"},"Add Employee"),a&&l.a.createElement(R,{onSubmit:async a=>{try{const l=await fetch("http://localhost:5000/api/employees",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(a)});if(!l.ok)throw new Error("Error adding employee: ".concat(l.statusText));const c=await l.json();t([...e,c]),r(!1),console.log("Employee added successfully!")}catch(n){console.error("Error adding employee:",n)}}})))};a(57);var F=()=>{const e=Object(s.p)(),t=t=>{e("/employee-directory/".concat(t))};return l.a.createElement("div",{className:"department-selection-page"},l.a.createElement(d,null),l.a.createElement("h2",null,"Select a department to view the employee details"),l.a.createElement("div",{className:"departments"},l.a.createElement("div",{className:"department",onClick:()=>t("Engineering")},l.a.createElement(i.a,{icon:u.f}),"Engineering"),l.a.createElement("div",{className:"department",onClick:()=>t("Marketing")},l.a.createElement(i.a,{icon:u.h}),"Marketing"),l.a.createElement("div",{className:"department",onClick:()=>t("IT")},l.a.createElement(i.a,{icon:u.g}),"IT Software"),l.a.createElement("div",{className:"department",onClick:()=>t("HR")},l.a.createElement(i.a,{icon:u.j}),"HR")))};const H=async()=>{try{const t=localStorage.getItem("jwtToken");if(!t)return!1;const a=await E.a.get("http://localhost:5000/api/auth/verify",{headers:{Authorization:"Bearer ".concat(t)}});return!!a.data.success||(console.error("Token verification failed:",a.data.message),localStorage.removeItem("jwtToken"),!1)}catch(e){return console.error("Error verifying token:",e),!1}};var U=()=>{const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)([]),[c,i]=Object(n.useState)([]),[u,d]=Object(n.useState)([]),E=e=>{i(t=>[...t,e])};return l.a.createElement(A,{value:{tasks:c,addTask:E}},l.a.createElement(v,null,l.a.createElement(o.a,{basename:"/collaboratehub_frontend"},l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/",element:l.a.createElement(m,null)}),l.a.createElement(s.b,{path:"/login",element:l.a.createElement(h,null)}),l.a.createElement(s.b,{path:"/register",element:l.a.createElement(p,null)}),l.a.createElement(s.b,{path:"/profile/:userId",element:l.a.createElement(b,null)}),l.a.createElement(s.b,{path:"/dashboard/*",element:H()?l.a.createElement(y,null):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/dashboard/document-sharing",element:H()?l.a.createElement(S,null):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/dashboard/event-calendar",element:H()?l.a.createElement(N,null):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/dashboard/task-management",element:H()?l.a.createElement(P,null):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/dashboard/employee-directory",element:H()?l.a.createElement(F,null):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/document-sharing/:department",element:H()?l.a.createElement(w,{addDocument:e=>{t(t=>[...t,e])},currentUserId:"currentUserId"}):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/view-documents",element:H()?l.a.createElement(O,{documents:e,currentUserId:"currentUserId"}):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/event-calendar/:department",element:H()?l.a.createElement(C,null):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/add-event/:department",element:H()?l.a.createElement(T,{addEvent:e=>{r(t=>[...t,e])}}):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/view-events",element:H()?l.a.createElement(I,{events:a}):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/task-management/:department",element:H()?l.a.createElement(k,{addTask:E}):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/view-tasks",element:H()?l.a.createElement(B,null):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/employee-directory/:department",element:H()?l.a.createElement(z,{employees:u}):l.a.createElement(s.a,{to:"/login"})}),l.a.createElement(s.b,{path:"/add-employee",element:H()?l.a.createElement(R,{addEmployee:e=>{d(t=>[...t,e])}}):l.a.createElement(s.a,{to:"/login"})})))))};const M=Object(n.createContext)(),q=e=>{let{children:t}=e;const[a,r]=Object(n.useState)(!1);return l.a.createElement(M.Provider,{value:{isAuthenticated:a,login:()=>{r(!0)},logout:()=>{r(!1)}}},t)};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(q,null,l.a.createElement(U,null))),document.getElementById("root"))}]),[[20,1,2]]]);
//# sourceMappingURL=main.e431278a.chunk.js.map